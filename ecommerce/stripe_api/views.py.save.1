from ecommerce.core.models import User
from rest_framework.response import Response
import logging
from rest_framework.decorators import api_view
import stripe

@api_view()
def get_customer_id(request):
    user_query = User.objects.filter(email=request.GET['email'])
    if user_query.exists():
        user = user_query[0]
        if 'customer_id' in user.tracking_context:
            return Response({'message':'', 'status': True, 'result':{'customer_id':user.tracking_context['customer_id']}, 'status_code':200})
        else:
            return Response({'message':'customer_id not found', 'status': False, 'result':{}, 'status_code':400})
    else:
        return Response({'message':'user not found', 'status': False, 'result':{}, 'status_code':400})


@api_view()
def create_customer(request):
    token = request.GET['token']
    if token:
        
    else:
        return Response({'message':'no token provided', 'status': False, 'result':{}, 'status_code':400})
